From ab3121ae2432afc194f8ef0cc63fb9f0c8bf33e3 Mon Sep 17 00:00:00 2001
From: ruslanbay <67730802+ruslanbay@users.noreply.github.com>
Date: Thu, 29 Jan 2026 02:55:18 +0100
Subject: [PATCH 5/5] debug

---
 src/libcamera/pipeline/simple/simple.cpp | 13 +++++++++++++
 1 file changed, 13 insertions(+)

diff --git a/src/libcamera/pipeline/simple/simple.cpp b/src/libcamera/pipeline/simple/simple.cpp
index f9d154e5..1f4b2d39 100644
--- a/src/libcamera/pipeline/simple/simple.cpp
+++ b/src/libcamera/pipeline/simple/simple.cpp
@@ -1528,6 +1528,10 @@ int SimplePipelineHandler::configure(Camera *camera, CameraConfiguration *c)
 	V4L2PixelFormat videoFormat;
 	if (format.code == pipeConfig->code) {
 		videoFormat = video->toV4L2PixelFormat(pipeConfig->captureFormat);
+		LOG(SimplePipeline, Debug)
+			<< "format.code == pipeConfig->code;"
+			<< " videoFormat = " << videoFormat
+			<< "; pipeConfig->captureFormat = " << pipeConfig->captureFormat;
 	} else {
 		/*
 		 * Bayer pattern has changed because of the transform that was applied on
@@ -1537,6 +1541,9 @@ int SimplePipelineHandler::configure(Camera *camera, CameraConfiguration *c)
 		BayerFormat cfgBayer = BayerFormat::fromPixelFormat(pipeConfig->captureFormat);
 		cfgBayer.order = data->sensor_->bayerOrder(config->combinedTransform());
 		videoFormat = cfgBayer.toV4L2PixelFormat();
+		LOG(SimplePipeline, Debug)
+			<< "format.code != pipeConfig->code"
+			<< "; videoFormat = " << videoFormat;
 	}
 
 	V4L2DeviceFormat captureFormat;
@@ -1562,6 +1569,12 @@ int SimplePipelineHandler::configure(Camera *camera, CameraConfiguration *c)
 	}
 
 	if (captureFormat.size != pipeConfig->captureSize) {
+		LOG(SimplePipeline, Debug)
+			<< "captureFormat.fourcc = " << captureFormat.fourcc
+			<< "; videoFormat = " << videoFormat;
+		LOG(SimplePipeline, Debug)
+			<< "captureFormat.size = " << captureFormat.size
+			<< "; pipeConfig->captureSize = " << pipeConfig->captureSize;
 		LOG(SimplePipeline, Error)
 			<< "Unable to configure capture in "
 			<< pipeConfig->captureSize << "-" << videoFormat
-- 
2.51.0

