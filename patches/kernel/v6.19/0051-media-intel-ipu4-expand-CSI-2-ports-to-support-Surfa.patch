From c4864b35cb6ed3efc57d3abad4021b5eb8426922 Mon Sep 17 00:00:00 2001
From: ruslanbay <67730802+ruslanbay@users.noreply.github.com>
Date: Wed, 18 Feb 2026 15:33:39 +0100
Subject: [PATCH 51/55] media: intel-ipu4: expand CSI-2 ports to support
 Surface Pro 7

---
 drivers/media/pci/intel/ipu4/ipu-platform-regs.h | 3 +++
 drivers/media/pci/intel/ipu4/ipu4-isys.c         | 3 +++
 drivers/media/pci/intel/ipu4/ipu4.c              | 2 +-
 3 files changed, 7 insertions(+), 1 deletion(-)

diff --git a/drivers/media/pci/intel/ipu4/ipu-platform-regs.h b/drivers/media/pci/intel/ipu4/ipu-platform-regs.h
index e54b2b55afbf..89fd67994884 100644
--- a/drivers/media/pci/intel/ipu4/ipu-platform-regs.h
+++ b/drivers/media/pci/intel/ipu4/ipu-platform-regs.h
@@ -49,6 +49,9 @@
 #define IPU_ISYS_CSI2_B_IRQ_MASK		GENMASK(1, 1)
 #define IPU_ISYS_CSI2_C_IRQ_MASK		GENMASK(2, 2)
 #define IPU_ISYS_CSI2_D_IRQ_MASK		GENMASK(3, 3)
+#define IPU_ISYS_CSI2_E_IRQ_MASK		GENMASK(4, 4)
+#define IPU_ISYS_CSI2_F_IRQ_MASK		GENMASK(5, 5)
+#define IPU_ISYS_CSI2_G_IRQ_MASK		GENMASK(6, 6)
 
 /* IRQ-related registers relative to ISYS_OFFSET */
 #define IPU_REG_ISYS_UNISPART_IRQ_EDGE            0x7c000
diff --git a/drivers/media/pci/intel/ipu4/ipu4-isys.c b/drivers/media/pci/intel/ipu4/ipu4-isys.c
index d23669a3103d..514eade03b26 100644
--- a/drivers/media/pci/intel/ipu4/ipu4-isys.c
+++ b/drivers/media/pci/intel/ipu4/ipu4-isys.c
@@ -270,6 +270,9 @@ irqreturn_t isys_isr(struct ipu_bus_device *adev)
 		{&sip1_status, IPU_ISYS_CSI2_B_IRQ_MASK},
 		{&sip1_status, IPU_ISYS_CSI2_C_IRQ_MASK},
 		{&sip1_status, IPU_ISYS_CSI2_D_IRQ_MASK},
+		{&sip1_status, IPU_ISYS_CSI2_E_IRQ_MASK},
+		{&sip1_status, IPU_ISYS_CSI2_F_IRQ_MASK},
+		{&sip1_status, IPU_ISYS_CSI2_G_IRQ_MASK},
 	};
 
 	spin_lock(&isys->power_lock);
diff --git a/drivers/media/pci/intel/ipu4/ipu4.c b/drivers/media/pci/intel/ipu4/ipu4.c
index c3615d225431..fe1ddcbad22f 100644
--- a/drivers/media/pci/intel/ipu4/ipu4.c
+++ b/drivers/media/pci/intel/ipu4/ipu4.c
@@ -281,7 +281,7 @@ const struct ipu_buttress_ctrl psys_buttress_ctrl = {
  * s0p3, s1p0, s1p1, s1p2, s1p3
  */
 static unsigned int ipu4p_csi_offsets[] = {
-	0x64300, 0x6c000, 0x6c100, 0x6c200, 0x6c300
+	0x64300, 0x6c000, 0x6c100, 0x6c200, 0x6c300, 0x6c400, 0x6c500, 0x6c600
 };
 
 static unsigned char ipu4p_csi_evlanecombine[] = {
-- 
2.51.0

