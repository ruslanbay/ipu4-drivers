From d390d04e34588bf0fc13ca5751e3e0ac98183fd9 Mon Sep 17 00:00:00 2001
From: ruslanbay <67730802+ruslanbay@users.noreply.github.com>
Date: Wed, 7 Jan 2026 18:21:15 +0100
Subject: [PATCH 05/45] media_entity_has_pad_interdep: mimic Intel's
 media_entity_has_route implementation

---
 drivers/media/mc/mc-entity.c | 5 +++--
 include/media/media-entity.h | 5 ++++-
 2 files changed, 7 insertions(+), 3 deletions(-)

diff --git a/drivers/media/mc/mc-entity.c b/drivers/media/mc/mc-entity.c
index 9519a537bfa2..a6e26b80c255 100644
--- a/drivers/media/mc/mc-entity.c
+++ b/drivers/media/mc/mc-entity.c
@@ -263,7 +263,7 @@ EXPORT_SYMBOL_GPL(media_entity_pads_init);
  *
  * Return: true if the pads are connected internally and false otherwise.
  */
-static bool media_entity_has_pad_interdep(struct media_entity *entity,
+bool media_entity_has_pad_interdep(struct media_entity *entity,
 					  unsigned int pad0, unsigned int pad1)
 {
 	if (pad0 >= entity->num_pads || pad1 >= entity->num_pads)
@@ -276,8 +276,9 @@ static bool media_entity_has_pad_interdep(struct media_entity *entity,
 	if (!entity->ops || !entity->ops->has_pad_interdep)
 		return true;
 
-	return entity->ops->has_pad_interdep(entity, pad0, pad1);
+	return entity->ops->has_pad_interdep(entity, pad0, pad1, NULL);
 }
+EXPORT_SYMBOL_GPL(media_entity_has_pad_interdep);
 
 static struct media_entity *
 media_entity_other(struct media_entity *entity, struct media_link *link)
diff --git a/include/media/media-entity.h b/include/media/media-entity.h
index b91ff6f8c3bb..619567297a78 100644
--- a/include/media/media-entity.h
+++ b/include/media/media-entity.h
@@ -283,7 +283,7 @@ struct media_entity_operations {
 			  const struct media_pad *remote, u32 flags);
 	int (*link_validate)(struct media_link *link);
 	bool (*has_pad_interdep)(struct media_entity *entity, unsigned int pad0,
-				 unsigned int pad1);
+				 unsigned int pad1, int *stream);
 };
 
 /**
@@ -1105,6 +1105,9 @@ __must_check int media_graph_walk_init(
  */
 void media_graph_walk_cleanup(struct media_graph *graph);
 
+bool media_entity_has_pad_interdep(struct media_entity *entity,
+					  unsigned int pad0, unsigned int pad1);
+
 /**
  * media_graph_walk_start - Start walking the media graph at a
  *	given entity
-- 
2.51.0

